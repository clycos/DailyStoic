var stoicArray;var reminderArray;var stoicFile="data/daily_stoic.json";var reminderFile="data/daily_reminders.json";var next=document.getElementById("next");var previous=document.getElementById("previous");var current=document.getElementById("current");var currentDate=new Date;var dateToProcess;var age;var monthNames=["January","February","March","April","May","June","July","August","September","October","November","December"];function readFile(file,callback){var rawFile=new XMLHttpRequest;rawFile.overrideMimeType("application/json");rawFile.open("GET",file,true);rawFile.onload=function(){console.log("Ready State: "+rawFile.readyState);console.log("Ready Status: "+rawFile.status);if(rawFile.readyState===4&&rawFile.status===200){callback(rawFile.responseText)}};rawFile.send(null)}function dayToProcess(daysToAdd){currentDate.setDate(currentDate.getDate()+daysToAdd);console.log("Current Date: "+currentDate);dateToProcess=monthNames[currentDate.getMonth()]+" "+currentDate.getDate();console.log("Date To Process: "+dateToProcess)}function getAge(dateString){var birthDate=new Date(dateString);age=currentDate.getFullYear()-birthDate.getFullYear();var m=currentDate.getMonth()-birthDate.getMonth();if(m<0||m===0&&currentDate.getDate()<birthDate.getDate()){age--}return age}function stoicOutput(inputArray,d){dayToProcess(d);var out="<hr />";for(var i=0;i<inputArray.length;i++){if(inputArray[i].date===dateToProcess){out+="<h2>"+inputArray[i].date+"</h2>";out+='<div class = "topic"> <h3 class="text-primary text-uppercase">'+inputArray[i].topic+"</h3></div>";out+='<div id = "quotes">';for(var j=0;j<inputArray[i].quotes.length;j++){out+='<div id="quote_'+(j+1)+'">'+'<blockquote class="blockquote">'+"<p>"+"<q>"+inputArray[i].quotes[j].quote+"</q>"+"</p>"+"<footer>"+"<address>"+inputArray[i].quotes[j].author+","+"</address>"+"<cite>"+inputArray[i].quotes[j].source+"</cite>"+"</footer>"+"</blockquote>"+"</div>"}out+="</div>";out+='<div id="notes">';out+=inputArray[i].notes;out+="</div>";if(inputArray[i].thoughts.length>0){out+='<div id="thoughts">';out+="<h3>Additional Thoughts</h3>";out+=inputArray[i].thoughts+"<hr />";out+="</div>"}else out+="<hr />"}}document.getElementById("stoic_quotes").innerHTML=out}function reminderOutput(inputArray){document.getElementById("reminders").style.visibility="hidden";var out="<h3>Reminders</h3>";for(var i=0;i<inputArray.length;i++){if(inputArray[i].date===dateToProcess){document.getElementById("reminders").style.visibility="visible";getAge(dateToProcess+" "+inputArray[i].year);out+="<p>";out+=inputArray[i].reminder;out+=" ("+inputArray[i].year+") - "+age;out+="</p>"}}document.getElementById("reminders").innerHTML=out}current.addEventListener("click",function(){currentDate=new Date;stoicOutput(stoicArray,0);reminderOutput(reminderArray)});next.addEventListener("click",function(){stoicOutput(stoicArray,1);reminderOutput(reminderArray)});previous.addEventListener("click",function(){stoicOutput(stoicArray,-1);reminderOutput(reminderArray)});readFile(stoicFile,function(text){stoicArray=JSON.parse(text);console.log(stoicArray);stoicOutput(stoicArray,0)});readFile(reminderFile,function(text){reminderArray=JSON.parse(text);console.log(reminderArray);reminderOutput(reminderArray)});